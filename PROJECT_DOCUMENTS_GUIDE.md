# 📁 專案文件管理系統使用指南

## 🎉 完成功能總覽

我為川輝科技的分潤管理系統建立了完整的**專案文件管理系統**，讓您輕鬆管理每個案子的提案書、合約等重要文件，並支援完整的版本控制！

## ✨ 核心功能特色

### 🗂️ **多元文件分類**
- 📋 **提案書** - 支援多版本提案管理
- 📄 **合約** - 正式合約文件儲存
- 📊 **規格書** - 技術規格和需求文件
- 📝 **會議記錄** - 專案會議紀錄
- 📝 **修正案** - 合約或規格修正文件
- 📁 **其他文件** - 彈性分類

### 🔄 **完整版本控制**
- ⭐ **當前版本標記** - 清楚標示最新版本
- 📚 **版本歷史查看** - 完整的版本演進紀錄
- 🔄 **版本恢復功能** - 可恢復到任何歷史版本
- 📝 **版本更新說明** - 每次更新都能加入說明
- 🔗 **版本關聯追蹤** - 自動建立版本間的關聯

### 🏷️ **智慧標籤系統**
- 🏷️ **自由標籤** - 用逗號分隔的靈活標籤系統
- ⭐ **重要文件標記** - 重要文件特殊標示
- 🔒 **機密文件管理** - 機密文件權限控制
- 🎨 **狀態視覺化** - 不同狀態用顏色區分

### 📋 **文件狀態管理**
- 📝 **草稿** (灰色) - 初稿階段
- 🔍 **審核中** (橙色) - 等待審核
- ✅ **已核准** (綠色) - 審核通過
- ✍️ **已簽署** (深綠) - 正式簽署
- 📦 **已歸檔** (灰藍) - 歸檔保存

### 🔍 **強大搜尋篩選**
- 🔎 **全文搜尋** - 搜尋文件名、描述、標籤
- 📂 **類型篩選** - 按文件類型快速篩選
- 👁️ **版本篩選** - 只看最新版本或查看歷史
- 📊 **智慧排序** - 按時間、名稱、類型、版本排序

## 📋 使用流程

### 1️⃣ **新增文件**
1. 點擊「+ 新增文件」
2. 選擇文件類型（提案書、合約等）
3. 填寫文件名稱和描述
4. 設定標籤（例如：緊急, 客戶A, 第二版）
5. 選擇文件狀態和重要性
6. 上傳檔案（支援多個檔案）
7. 點擊「新增文件」完成

### 2️⃣ **版本管理**
1. 在文件卡片中點擊「📝 新版本」
2. 輸入版本更新說明
3. 系統自動建立新版本並標記為當前版本
4. 舊版本自動保留在歷史中

### 3️⃣ **查看版本歷史**
1. 點擊文件卡片中的「📚 版本」按鈕
2. 查看完整版本演進時間線
3. 可以開啟、下載任何歷史版本
4. 支援恢復舊版本為新的當前版本

### 4️⃣ **狀態更新**
1. 使用文件卡片下方的下拉選單
2. 即時更新文件狀態
3. 已核准文件會自動記錄核准日期

## 🗂️ 檔案儲存結構

```
專案文件儲存路徑：
📁 Supabase Storage
└── 📂 documents/
    └── 📂 projects/
        └── 📂 [專案ID]/
            └── 📂 documents/
                ├── 📄 提案書_v1.pdf
                ├── 📄 提案書_v2.pdf
                ├── 📄 合約_正式版.pdf
                └── 📄 規格書_修訂版.docx
```

## 💡 使用技巧

### 🏷️ **標籤建議**
- **客戶標籤**：客戶A, 客戶B, VIP客戶
- **狀態標籤**：緊急, 待確認, 已修正
- **版本標籤**：初稿, 修訂版, 最終版
- **內容標籤**：價格調整, 規格變更, 條件修正

### 📊 **版本編號規則**
- v1, v2, v3... 自動遞增
- 版本恢復會建立新版本（不會覆蓋）
- 每個版本都有完整的變更說明

### 🔍 **搜尋技巧**
- 搜尋文件名稱：直接輸入關鍵字
- 搜尋標籤：輸入標籤內容
- 搜尋描述：輸入描述中的關鍵字
- 組合搜尋：同時符合多個條件

## 🎨 視覺化指南

### 文件類型圖示
- 📋 提案書（藍色）
- 📄 合約（紅色）  
- 📊 規格書（綠色）
- 📝 會議記錄（橙色）
- 📝 修正案（紫色）
- 📁 其他（灰色）

### 狀態顏色
- 🔘 草稿（灰色）
- 🟡 審核中（橙色）
- 🟢 已核准（綠色）
- 🟢 已簽署（深綠）
- 🔵 已歸檔（藍灰）

### 重要性標記
- ⭐ **重要文件** - 金色星星標記
- 🔒 **機密文件** - 紅色鎖頭標記

## 🔐 權限管理

### 存取權限
- ✅ **所有登入用戶** - 可查看和上傳文件
- ✅ **文件上傳者** - 可編輯和刪除自己的文件
- ✅ **管理員** - 完整權限管理

### 機密文件
- 🔒 標記為機密的文件會特別標示
- 🔒 未來可擴展更嚴格的權限控制

## 🚀 進階功能

### 版本恢復機制
1. 恢復舊版本不會刪除當前版本
2. 恢復操作會建立新的版本號
3. 完整保留所有歷史記錄
4. 支援版本間的比較查看

### 批次操作
- 支援多檔案同時上傳
- 支援批次狀態更新
- 支援批次標籤編輯

### 檔案格式支援
- 📄 **文檔**：PDF, Word, Excel
- 🖼️ **圖片**：JPG, PNG, GIF
- 📊 **最大檔案**：10MB per file
- 📁 **多檔案**：每個文件最多 10 個檔案

## 🛠️ 技術架構

### 資料庫設計
- **project_documents** - 主要文件表
- **project_document_history** - 變更歷史表
- 支援 JSONB 標籤儲存
- 完整的索引優化

### 檔案儲存
- **Supabase Storage** 整合
- **CDN 加速** 存取
- **自動備份** 機制
- **權限控制** 整合

## 📈 實際應用場景

### 💼 **提案階段**
1. 上傳初版提案書（標籤：初稿, 客戶A）
2. 客戶回饋後上傳修訂版（新版本 + 更新說明）
3. 最終確認版本（狀態更新為已核准）

### 📄 **合約簽署**
1. 上傳合約草稿（狀態：草稿）
2. 法務審核後更新（狀態：審核中）
3. 客戶確認後更新（狀態：已核准）
4. 正式簽署後更新（狀態：已簽署）

### 📊 **規格變更**
1. 原始規格書歸檔
2. 建立新版本處理變更需求
3. 用標籤標記變更重點
4. 保持完整的變更歷史

---

## 🎯 總結

川輝科技的專案文件管理系統現在具備：

✅ **完整的版本控制** - 再也不怕版本混亂  
✅ **智慧分類標籤** - 快速找到需要的文件  
✅ **狀態流程管理** - 清楚掌握文件進度  
✅ **安全檔案儲存** - Supabase 企業級安全  
✅ **直觀操作介面** - 簡單易用的卡片式設計  

**現在您可以輕鬆管理每個專案的所有重要文件，從提案到合約簽署的完整流程！** 🚀